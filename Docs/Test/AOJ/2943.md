---
title: AOJ2943 イルミネーション
documentation_of: //Test/AOJ/2943.test.cpp
---

燃やす埋める。

## 割当による損得の関係を見極める

電源装置をつけると $W$ の損

電源装置をつけると $s = B_{(i, j)} + B_{(i + 1,j)} + B_{(i, j + 1)} + B_{(i + 1, j + 1)}$ の得

この損得をまとめて、電源装置をつけると $s - W$ の得とする。これは負になりうる可能性があり、(最小カットに帰着したいので負になるのは困るので) $\text{INF} - (s - W)$ の損とする

電源装置をつけないと $\text{INF}$ の損

-> つける場合に $\text{INF}$ を使ったので、こっちも揃える。

$(i + 0.5, j + 0.5)$ にある電源装置を付けて、 $(i + 1.5, j + 1.5)$ にある電源装置をつけると $B_{(i + 1, j + 1)}$ の損 ( $B_{(i + 1, j + 1)}$ が2回寄与しているのを打ち消すための「損」表現

$(i + 0.5, j + 0.5$ にある電源装置を付けて、 $(i + 1.5, j - 0.5)$ にある電源装置をつけると $B_{(i + 1, j)}$ の損

## 得の最大化を損の最小化に言い換える

よって損をネットワークの容量とする

## 関係が二部グラフになっていることに注目する

全ての電源装置を source -> 電源装置 を「つける」、 電源装置 -> sink を「付けない」とすると困る。

なぜなら「両方つけると損」という関係を上手く張れないから
- 電源装置 -> 電源装置という辺を張ってもsource -> 電源装置 -> 電源装置 -> sourceというパスは考慮されないから

そこで、関係が電源装置の存在する行に注目すると二部グラフの様になっていることがわかる。
- $i$ 行目の電源装置が関係するのは、 $i - 1$ 行目と $i + 1$ 行目のみ

よって奇数行目にある電源装置は 電源装置 -> sinkを「つける」source -> 電源装置を「つけない」と反転すると上手くいく
- 関係がsoure -> 電源装置 -> 電源装置 -> sinkというパスをつくってくれる
